<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <title>PickUpLog: ì˜¤ëŠ˜ì˜ ë¶„ì‹¤ ì˜ˆë³´</title>
    <style>
        /* ë¶„ì„ ë¦¬í¬íŠ¸ì˜ ê°€ë…ì„±ì„ ìœ„í•œ ì„ì‹œ ìŠ¤íƒ€ì¼ */
        body { font-family: Arial, sans-serif; margin: 40px; background-color: #f4f4f4; }
        .report-box { 
            background-color: white; 
            border: 1px solid #ddd; 
            padding: 25px; 
            border-radius: 10px; 
            max-width: 450px; 
            margin: 20px auto; 
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
        }
        .header h2 { margin-top: 0; color: #1e88e5; }
        .list-item { 
            font-size: 1.2em; 
            padding: 8px 0; 
            border-bottom: 1px dotted #eee;
        }
        .list-item:last-child { border-bottom: none; }
        .warning { 
            color: #d32f2f; 
            font-weight: bold; 
            margin-top: 30px; 
            padding: 15px; 
            background-color: #ffebee;
            border-radius: 6px;
        }
    </style>
</head>
<body>

    <div class="report-box">
        
        <form method="GET" action="/">
            <h3>ë¶„ì‹¤ ì˜ˆë³´ ì¡°ê±´ ì„¤ì •</h3>
            <label for="line" style="font-weight: bold;">ë…¸ì„ :</label>
            <select name="line" id="line">
                <option value="LINE2" {% if report.line == 'LINE2' %}selected{% endif %}>2í˜¸ì„ </option>
                <option value="LINE1" {% if report.line == 'LINE1' %}selected{% endif %}>1í˜¸ì„ </option>
                <option value="LINE3" {% if report.line == 'LINE3' %}selected{% endif %}>3í˜¸ì„ </option>
            </select>
            
            <label for="condition" style="font-weight: bold; margin-left: 20px;">ë‚ ì”¨:</label>
            <select name="condition" id="condition">
                <option value="í‰ì†Œ" {% if report.date_condition == 'í‰ì†Œ' %}selected{% endif %}>í‰ì†Œ</option>
                <option value="ë¹„ì˜¤ëŠ” ë‚ " {% if report.date_condition == 'ë¹„ì˜¤ëŠ” ë‚ ' %}selected{% endif %}>ë¹„ì˜¤ëŠ” ë‚ </option>
            </select>
            <button type="submit" style="padding: 5px 10px; margin-left: 10px;">ì˜ˆë³´ í™•ì¸</button>
        </form>

        <hr>
        
        <div class="header">
            <h2>ğŸš‡ ì˜¤ëŠ˜ì˜ ë¶„ì‹¤ ì˜ˆë³´</h2>
            <p><strong>{{ report.line|default:"ë…¸ì„  ë¯¸ì„ íƒ" }}</strong> (ì¡°ê±´: {{ report.date_condition|default:"í‰ì†Œ" }})</p>
            <small>ë¶„ì„ ê¸°ì¤€ ë°ì´í„°: {{ report.latest_date|date:"Yë…„ mì›” dì¼" }}</small>
        </div>
        
        <h3>ì˜ˆìƒ ë¶„ì‹¤ë¬¼ TOP 3 ë¹„ìœ¨</h3>
        
        {% for item in report.items %}
            <div class="list-item">
                <span style="font-weight: bold;">{{ forloop.counter }}. {{ item.category|default:"N/A" }}</span>
                <span style="float: right; color: #1e88e5;">{{ item.rate|floatformat:1 }}%</span>
            </div>
        {% empty %}
            <p>ë°ì´í„° ë¶„ì„ ì˜¤ë¥˜ ë˜ëŠ” ë¶€ì¡±ìœ¼ë¡œ ì˜ˆë³´ë¥¼ ì œê³µí•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.</p>
        {% endfor %}

        <div class="warning">
            ğŸ“¢ {{ report.warning|default:"ì•ˆì „í•œ í•˜ë£¨ ë³´ë‚´ì„¸ìš”!" }}
        </div>
    </div>

</body>
</html>